<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="viewport" content="width=device-width, initial-scale=1.0">
    <title>条件付確率と期待値の解説</title>
    <style>
        .answer { display: none; }
        .toggle-button { margin-top: 10px; display: inline-block; cursor: pointer; color: blue; text-decoration: underline; }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        function toggleAnswer(id) {
            var element = document.getElementById(id);
            if (element.style.display === "none") {
                element.style.display = "block";
            } else {
                element.style.display = "none";
            }
        }
    </script>
</head>
<body>

<h1>条件付確率と期待値の解説</h1>

<h2>条件付確率の解説</h2>
<p>条件付確率（じょうけんつきかくりつ、Conditional Probability）とは、ある事象が起こったという条件の下で別の事象が起こる確率を表します。事象 \(A\) が起こったという条件の下で事象 \(B\) が起こる確率を \(P(B|A)\) と表します。次のように計算されます：</p>
<p>
\[
P(B|A) = \frac{P(A \cap B)}{P(A)}
\]
</p>

<h3>例 1</h3>
<p>袋の中に赤いボール5個、青いボール3個、緑のボール2個が入っています。この袋から1個のボールを取り出し、そのボールが赤いボールであることが分かったとき、次に取り出したボールが青いボールである確率を求めます。</p>

<p>まず、条件付き確率の公式を使います。次のように計算します：</p>
<p>
赤いボールを1個取り出した後、袋の中に残っているボールは、赤いボール4個、青いボール3個、緑のボール2個です。このため、次にボールを取り出すとき、青いボールである確率は、
</p>
<p>
\[
P(\text{青いボール} | \text{赤いボール}) = \frac{3}{4+3+2} = \frac{3}{9} = \frac{1}{3}
\]
</p>

<h2>期待値の解説</h2>
<p>期待値（きたいち、Expected Value）とは、確率変数の長期的な平均値を表します。ある確率変数 \(X\) の期待値は次のように計算されます：</p>
<p>
\[
E(X) = \sum_i x_i \cdot P(x_i)
\]
</p>
<p>ここで、\(x_i\) は変数 \(X\) が取る値、\(P(x_i)\) はその値の確率です。</p>

<h3>例 2</h3>
<p>サイコロを振って出た目の値を \(X\) とする。このとき、期待値 \(E(X)\) を求めます。</p>

<p>サイコロの目は 1 から 6 までの値を取り、それぞれの目が出る確率は \(\frac{1}{6}\) です。このため、期待値は次のように計算されます：</p>
<p>
\[
E(X) = 1 \cdot \frac{1}{6} + 2 \cdot \frac{1}{6} + 3 \cdot \frac{1}{6} + 4 \cdot \frac{1}{6} + 5 \cdot \frac{1}{6} + 6 \cdot \frac{1}{6} = \frac{1+2+3+4+5+6}{6} = \frac{21}{6} = 3.5
\]
</p>

<h2>練習問題</h2>
<p>次の問題を解いてください：</p>
<ol>
    <li>袋の中に赤いボール4個、青いボール4個、緑のボール2個が入っています。この袋から1個のボールを取り出し、そのボールが緑のボールであることが分かったとき、次に取り出したボールが赤いボールである確率を求めなさい。</li>
    <li>袋の中に1から5までの番号が書かれたカードが1枚ずつ入っています。この袋から1枚のカードを引き、その番号を \(X\) とします。このとき、期待値 \(E(X)\) を求めなさい。</li>
    <li>2つのサイコロを同時に振ったとき、出た目の合計が 5 である確率を求めなさい。</li>
</ol>

<div class="toggle-button" onclick="toggleAnswer('answer6')">解答を表示/非表示</div>
<div id="answer6" class="answer">
    <ol>
        <li>袋の中に赤いボール4個、青いボール4個、緑のボール2個が入っています。この袋から1個のボールを取り出し、そのボールが緑のボールであることが分かったとき、次に取り出したボールが赤いボールである確率を求めなさい。
            <p>緑のボールを1個取り出した後、袋の中に残っているボールは、赤いボール4個、青いボール4個、緑のボール1個です。このため、次にボールを取り出すとき、赤いボールである確率は、</p>
            <p>
            \[
            P(\text{赤いボール} | \text{緑のボール}) = \frac{4}{4+4+1} = \frac{4}{9}
            \]
            </p>
        </li>
        <li>袋の中に1から5までの番号が書かれたカードが1枚ずつ入っています。この袋から1枚のカードを引き、その番号を \(X\) とします。このとき、期待値 \(E(X)\) を求めなさい。
            <p>番号1から5までのカードがそれぞれ1枚ずつ入っているため、それぞれの番号の出る確率はすべて同じで \(\frac{1}{5}\) です。このため、期待値は次のように計算されます：</p>
            <p>
            \[
            E(X) = 1 \cdot \frac{1}{5} + 2 \cdot \frac{1}{5} + 3 \cdot \frac{1}{5} + 4 \cdot \frac{1}{5} + 5 \cdot \frac{1}{5} = \frac{1+2+3+4+5}{5} = \frac{15}{5} = 3
            \]
            </p>
        </li>
        <li>2つのサイコロを同時に振ったとき、出た目の合計が 5 である確率を求めなさい。
            <p>2つのサイコロの出た目の組み合わせをすべて考えます。出た目の合計が5になるのは次の組み合わせです：</p>
            <ul>
                <li>(1, 4)</li>
                <li>(2, 3)</li>
                <li>(3, 2)</li>
                <li>(4, 1)</li>
            </ul>
            <p>これらの組み合わせが4通りあるので、全ての目の組み合わせ (6×6 = 36) に対して、確率は次のようになります：</p>
            <p>
            \[
            P(\text{合計が 5 }) = \frac{4}{36} = \frac{1}{9}
            \]
            </p>
        </li>
    </ol>
</div>

</body>
</html>
